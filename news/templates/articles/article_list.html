<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–°–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π</title>
</head>
<body>
    <h1>–°–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π</h1>
    <ul>
        {% for article in articles %}
            <li>
                <h2>
                    <a href="{% url 'article_detail' article.pk %}">{{ article.title }}</a>
                </h2>
                <p>{{ article.preview }}</p>
                <p>–õ–∞–π–∫–∏: {{ article.rating }}</p>
                <p>–î–∏–∑–ª–∞–π–∫–∏: {{ article.rating|add:-1 }}</p>

                <form action="{% url 'article_like' article.pk %}" method="post" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit">üëç –õ–∞–π–∫</button>
                </form>

                <form action="{% url 'article_dislike' article.pk %}" method="post" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit">üëé –î–∏–∑–ª–∞–π–∫</button>
                </form>

                <p><a href="{% url 'add_comment' article.pk %}">–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</a></p>

                <h3>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:</h3>
                <ul>
                    {% for comment in article.comments.all %}
                        <li>{{ comment.text }} (–õ–∞–π–∫–∏: {{ comment.rating }})</li>
                    {% empty %}
                        <li>–ù–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤</li>
                    {% endfor %}
                </ul>
            </li>
        {% endfor %}
    </ul>

    {# –ü–∞–≥–∏–Ω–∞—Ü–∏—è #}
    <div class="pagination">
        {% if page_obj.has_previous %}
            <a href="?page=1">¬´ –ü–µ—Ä–≤–∞—è</a>
            <a href="?page={{ page_obj.previous_page_number }}">‚Äπ –ù–∞–∑–∞–¥</a>
        {% else %}
            <span>¬´ –ü–µ—Ä–≤–∞—è</span>
            <span>‚Äπ –ù–∞–∑–∞–¥</span>
        {% endif %}

        {% for num in paginator.page_range %}
            {% if num >= page_obj.number|add:-2 and num <= page_obj.number|add:2 %}
                {% if num == page_obj.number %}
                    <strong>{{ num }}</strong>
                {% else %}
                    <a href="?page={{ num }}">{{ num }}</a>
                {% endif %}
            {% endif %}
        {% endfor %}

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">–í–ø–µ—Ä—ë–¥ ‚Ä∫</a>
            <a href="?page={{ paginator.num_pages }}">–ü–æ—Å–ª–µ–¥–Ω—è—è ¬ª</a>
        {% else %}
            <span>–í–ø–µ—Ä—ë–¥ ‚Ä∫</span>
            <span>–ü–æ—Å–ª–µ–¥–Ω—è—è ¬ª</span>
        {% endif %}
    </div>
</body>
</html>